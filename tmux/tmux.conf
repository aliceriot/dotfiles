# get the colors right (v. important)
set -g default-terminal "screen-256color"

# gnome-terminal is utf-8
setw -g utf8 on
set -g status-utf8 on

# get mouse scrollback and middle mouse copypaste
set-option -ga terminal-override ',rxvt-uni*:XT:Ms=\E]52;%p1%s;%p2%s\007'
set-window-option -g mode-mouse on
set-option -g mouse-select-pane on
set-option -g mouse-select-window on
set-option -g mouse-resize-pane on
setw -g mode-mouse on

# change command prefix to ctrl-w
unbind C-b
set -g prefix C-w
bind C-w send-prefix

#make tmux highlight windows w/ new activity
setw -g monitor-activity on
set -g visual-activity on

#automatic window renames

#make splits follow i3 and vim
bind u split-window -c "#{pane_current_path}"
bind o split-window -h -c "#{pane_current_path}"

is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?)(diff)?$"'
# bind -n m-h if-shell "$is_vim" "send-keys m-h" "select-pane -L"
# bind -n m-j if-shell "$is_vim" "send-keys m-j" "select-pane -D"
# bind -n m-k if-shell "$is_vim" "send-keys m-k" "select-pane -U"
# bind -n m-l if-shell "$is_vim" "send-keys m-l" "select-pane -R"
# bind -n m-\ if-shell "$is_vim" "send-keys m-\\" "select-pane -l"
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind \ select-pane -l

# switch windows (sort of vimmy)
bind ] next-window
bind [ previous-window

# new window
bind -n m-n new-window

# kill window
unbind m-q
bind -n m-q kill-pane

# make a pane into a window
bind b break-pane
bind B break-pane -d

# reload configuration
bind R source-file ~/.tmux.conf

# resize panes like vim
# feel free to change the "1" to however many lines you want to resize by, only
# one at a time can be slow
bind < resize-pane -L 1
bind > resize-pane -R 1
bind - resize-pane -D 1
bind + resize-pane -U 1

#status bar
set-option -g status on

# vi-style controls for copy mode
setw -g mode-keys vi

#### COLOUR (Solarized dark)

# disappearing statusbar
set-option -g status-bg default
# set-option -g status-fg yellow #yellow
set-option -g status-attr default

# default window title colors
set-window-option -g window-status-fg brightblue #base0
set-window-option -g window-status-bg default
#set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg brightred #orange
set-window-option -g window-status-current-bg default
#set-window-option -g window-status-current-attr bright

# pane border
set-option -g pane-border-fg black #base02
set-option -g pane-active-border-fg brightgreen #base01

# message text
set-option -g message-bg black #base02
set-option -g message-fg brightred #orange

# pane number display
set-option -g display-panes-active-colour blue #blue
set-option -g display-panes-colour brightred #orange

# clock
set-window-option -g clock-mode-colour green #green

# configuration for TPM
set -g @tpm_plugins "              \
  tmux-plugins/tpm                 \
  tmux-plugins/tmux-yank           \
  tmux-plugins/tmux-resurrect      \
  tmux-plugins/tmux-battery      \
"

run '~/.tmux/plugins/tpm/tpm'


#tmuxline.vim file
source-file ~/.tmux/tmuxline_snapshot
