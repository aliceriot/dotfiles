# get the colors right (v. important)
set-option -ga terminal-overrides ",screen-256color-bce:Tc"

set -g escape-time 20

# get mouse scrollback and middle mouse copypaste
set-option -g mouse on

# change command prefix to ctrl-w
unbind C-b
set -g prefix C-w
bind C-w send-prefix

#make tmux highlight windows w/ new activity
setw -g monitor-activity on
set -g visual-activity on

#make splits follow i3 and vim
bind u split-window -c "#{pane_current_path}"
bind o split-window -h -c "#{pane_current_path}"

#select tmux windows
bind -n C-F1 select-window -t 0
bind -n C-F2 select-window -t 1
bind -n C-F3 select-window -t 2
bind -n C-F4 select-window -t 3
bind -n C-F5 select-window -t 4
bind -n C-F6 select-window -t 5
bind -n C-F7 select-window -t 6
bind -n C-F8 select-window -t 7
bind -n C-F9 select-window -t 8
bind -n C-F10 select-window -t 9

is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?)(diff)?$"'
# bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
# bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
# bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
# bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"
# bind -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind \ select-pane -l

# switch windows (sort of vimmy)
bind ] next-window
bind [ previous-window

# new window
bind n new-window

# kill window
unbind m-q
bind x kill-pane

# make a pane into a window
bind b break-pane
bind B break-pane -d

# send a pane to a different window
bind S command-prompt -p "send pane to:" "join-pane -t :'%%'"

# reload configuration
bind R source-file ~/.tmux.conf

# resize panes like vim
# feel free to change the "1" to however many lines you want to resize by, only
# one at a time can be slow
bind < resize-pane -L 1
bind > resize-pane -R 1
bind - resize-pane -D 1
bind + resize-pane -U 1

#status bar
set-option -g status on

# vi-style controls for copy mode
setw -g mode-keys vi

run-shell ~/dotfiles/tmux/plugins/battery/battery.tmux

#tmuxline.vim file
source-file ~/dotfiles/tmux/tmuxline_snapshot
