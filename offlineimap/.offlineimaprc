[general]
pythonfile = ~/.offlineimap.py
accounts = personal
ui = ttyui

[Account personal]
localrepository = personal-local
remoterepository = personal-remote
status_backend = sqlite
presynchook = /home/alice/dotfiles/notmuch/maildir-notmuch-sync.sh pre "~/mail/personal"
postsynchook = /home/alice/dotfiles/notmuch/maildir-notmuch-sync.sh post "~/mail/personal"

[Repository personal-local]
type = Maildir
localfolders = ~/mail/personal
nametrans = lambda folder: {
                            'drafts':    '[Gmail]/Drafts',
                            'flagged':   '[Gmail]/Starred',
                            'important': '[Gmail]/Important',
                            'inbox':     'INBOX',
                            'spam':      '[Gmail]/Spam',
                            'trash':     '[Gmail]/Trash',
                            }.get(folder, folder)

[Repository personal-remote]
type = Gmail
realdelete = no
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
remoteuser = alice.writes.wrongs@gmail.com
remotepasseval = get_pass()
nametrans = lambda folder:      re.sub('\[Gmail\]\/All Mail', 'archive',
                                re.sub('\[Gmail\]\/Drafts', 'drafts',
                                re.sub('\[Gmail\]\/Important', 'important',
                                re.sub('\[Gmail\]\/Sent Mail', 'sent',
                                re.sub('\[Gmail\]\/Spam', 'spam',
                                re.sub('\[Gmail\]\/Starred', 'flagged',
                                re.sub('\[Gmail\]\/Trash', 'trash',
                                re.sub('INBOX', 'inbox', folder))))))))
